/*!
 * get-css-data
 * v1.3.2
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */
function getUrls(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={mimeType:n.mimeType||null,onBeforeSend:n.onBeforeSend||Function.prototype,onSuccess:n.onSuccess||Function.prototype,onError:n.onError||Function.prototype,onComplete:n.onComplete||Function.prototype},o=Array.isArray(e)?e:[e],r=Array.apply(null,Array(o.length)).map(function(e){return null});function l(e,n){t.onError(e,o[n],n)}function u(e,n){var l=t.onSuccess(e,o[n],n);e=!1===l?"":l||e,r[n]=e,-1===r.indexOf(null)&&t.onComplete(r)}o.forEach(function(e,n){var o=document.createElement("a");if(o.setAttribute("href",e),o.href=o.href,o.host!==location.host&&"undefined"!=typeof XDomainRequest){var r=new XDomainRequest;r.open("GET",e),r.timeout=0,r.onprogress=Function.prototype,r.ontimeout=Function.prototype,r.onload=function(){u(r.responseText,n)},r.onerror=function(e){l(r,n)},setTimeout(function(){r.send()},0)}else{var c=new XMLHttpRequest;c.open("GET",e),t.mimeType&&c.overrideMimeType&&c.overrideMimeType(t.mimeType),t.onBeforeSend(c,e,n),c.onreadystatechange=function(){4===c.readyState&&(200===c.status?u(c.responseText,n):l(c,n))},c.send()}})}function getCssData(e){var n={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},t={include:e.include||'style,link[rel="stylesheet"]',exclude:e.exclude||null,filter:e.filter||null,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},o=Array.apply(null,document.querySelectorAll(t.include)).filter(function(e){return!matchesSelector(e,t.exclude)}),r=Array.apply(null,Array(o.length)).map(function(e){return null});function l(){if(-1===r.indexOf(null)){var e=r.join("");t.onComplete(e,r,o)}}function u(e,n,o,u){var s=t.onSuccess(e,o,u);(function e(n,o,r,l){var u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];var i=c(n,r,s);i.rules.length?getUrls(i.absoluteUrls,{onBeforeSend:function(e,n,r){t.onBeforeSend(e,o,n)},onSuccess:function(e,n,r){var l=t.onSuccess(e,o,n),u=c(e=!1===l?"":l||e,n,s);return u.rules.forEach(function(n,t){e=e.replace(n,u.absoluteRules[t])}),e},onError:function(t,c,a){u.push({xhr:t,url:c}),s.push(i.rules[a]),e(n,o,r,l,u,s)},onComplete:function(t){t.forEach(function(e,t){n=n.replace(i.rules[t],e)}),e(n,o,r,l,u,s)}}):l(n,u)})(e=!1===s?"":s||e,o,u,function(e,u){null===r[n]&&(u.forEach(function(e){return t.onError(e.xhr,o,e.url)}),!t.filter||t.filter.test(e)?r[n]=e:r[n]="",l())})}function c(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={};return r.rules=(e.replace(n.cssComments,"").match(n.cssImports)||[]).filter(function(e){return-1===o.indexOf(e)}),r.urls=r.rules.map(function(e){return e.replace(n.cssImports,"$1")}),r.absoluteUrls=r.urls.map(function(e){return getFullUrl(e,t)}),r.absoluteRules=r.rules.map(function(e,n){var o=r.urls[n],l=getFullUrl(r.absoluteUrls[n],t);return e.replace(o,l)}),r}o.length?o.forEach(function(e,n){var o=e.getAttribute("href"),c=e.getAttribute("rel"),s="LINK"===e.nodeName&&o&&c&&"stylesheet"===c.toLowerCase(),i="STYLE"===e.nodeName;s?getUrls(o,{mimeType:"text/css",onBeforeSend:function(n,o,r){t.onBeforeSend(n,e,o)},onSuccess:function(t,r,l){var c=getFullUrl(o,location.href);u(t,n,e,c)},onError:function(o,u,c){r[n]="",t.onError(o,e,u),l()}}):i?u(e.textContent,n,e,location.href):(r[n]="",l())}):t.onComplete("",[])}function getFullUrl(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:location.href,t=document.implementation.createHTMLDocument(""),o=t.createElement("base"),r=t.createElement("a");return t.head.appendChild(o),t.body.appendChild(r),o.href=n,r.href=e,r.href}function matchesSelector(e,n){return(e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector).call(e,n)}export default getCssData;
//# sourceMappingURL=get-css-data.esm.min.js.map
